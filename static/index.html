<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="/static/styles.css">
</head>

<body>
    <h1>España</h1>
    <a
        href="https://opendata.esri.es/datasets/ComunidadSIG::viajeros-entrados-por-puntos-turisticos-y-pais-de-residencia-/api">Link
        Api</a>
    <p>Esta api contiene informacion sobre paises y comunidades de España como su poblacion o el area que ocupan y la
        cantidad de turismo en estos y de donde provienen los turistas</p>
    <p>Esto sirve para mostrar en consola y el htlm los paises desde los cuales vienen turistas a cierta comunidad o
        ciudad</p>
    <br>
    <label for="comunidades">Selecciona una zona:</label>
    <select id="comunidades" name="comunidad">
        <option value="VITORIA-GASTEIZ">Vitoria-Gasteiz</option>
        <option value="ARAGON">Aragon</option>
    </select>
    <br>
    <button id="mostrarDatos" onclick="mostrarDatos()">Mostrar Datos</button>
    <p id="ResultadoMostrarDatos">Desconocido</p>
    <h1>Pais de los Turistas</h1>
    <p>Esto sirve para mostrar por consola y el htlm el porcentaje de turistas de ese pais</p>
    <br>
    <select id="pais" name="paises">
        <option value="Francia">Francia</option>
        <option value="Italia">Italia</option>
    </select>
    <br>
    <button id="compararDatosTotal" onclick="compararDatosTotal()">Comparar cantidad turistas</button>
    <p id="ResultadoCompararTotalyPais">Desconocido</p>
    <h1>Area del Lugar</h1>
    <p>Esto sirve para mostrar por consola y el htlm el tamaño</p>
    <br>
    <button id="mostrarArea" onclick="mostrarArea()">Mostrar Area</button>
    <p id="ResultadosAreaPais">Desconocido</p>
    <h1>Total de poblacion Extranjera</h1>
    <p>Esto sirve para mostrar por consola y html el total de poblacion que es extranjera</p>
    <br>
    <button id="mostrarPoblacionE" onclick="mostrarPoblacionE()">Mostrar Poblacion Española</button>
    <p id="ResultadosAreaPaisMayor">Desconocido</p>
</body>
<script>
    async function mostrarDatos() {
        const myApiUrl = "https://opendatadavidpetrunov.onrender.com/autobuses";
        var elemento = document.getElementById("ResultadoMostrarDatos");
        var select = document.getElementById("comunidades").value;

        elemento.innerHTML = "Calculando"

        const json = {
            comunidad: select,
        }

        console.log("Comunidad Autónoma seleccionada:", select);

        const response = await fetch(myApiUrl + "/aaaa", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(json),
        });   const data = await response.json();
        console.log(data)
    
        elemento.innerHTML=JSON.stringify(data);
    }
    
    async function compararDatosTotal(){
        const myApiUrl = "https://opendatadavidpetrunov.onrender.com/autobuses";
    
        var elemento = document.getElementById("ResultadoCompararTotalyPais") 
        var select = document.getElementById("comunidades").value;
        var select2 = document.getElementById("pais").value
    
        elemento.innerHTML = "Calculando"
    
        const json = {
            comunidad: select,
            pais: select2,
        }
    
        console.log("Comunidad Autónoma y pais seleccionados:", select, select2);
    
        const response = await fetch(myApiUrl+"/bbbb",{
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(json),
        });
    
        const data = await response.json();
        console.log(data)
        console.log(elemento);
        elemento.innerHTML = data;
    
    }
    
    async function mostrarArea(){
    
        const myApiUrl = "https://opendatadavidpetrunov.onrender.com/autobuses";
    
        var elemento = document.getElementById("ResultadosAreaPais") 
        var select = document.getElementById("comunidades").value;
    
        elemento.innerHTML = "Calculando"
    
        console.log(select)
    
        const json = {
            comunidad: select,
        }
    
        const response = await fetch(myApiUrl+"/cccc",{
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(json),
        });
    
        const data = await response.json();
        console.log(data)
        elemento.innerHTML = JSON.stringify(data);
    }
    
    async function mostrarPoblacionE(){
        const myApiUrl = "https://opendatadavidpetrunov.onrender.com/autobuses";
        var elemento = document.getElementById("ResultadosAreaPaisMayor");
        var select = document.getElementById("comunidades").value;
    
        elemento.innerHTML="Calculando"
    
        console.log(select)
    
        const json = {
            comunidad: select,
        }
    
        console.log("Comunidad Autónoma seleccionada:", select);
    
        const response = await fetch(myApiUrl+"/dddd",{
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(json),
        });
    
        const data = await response.json();
        console.log(data)
    
        elemento.innerHTML=JSON.stringify(data);
    }
</script>

</html>